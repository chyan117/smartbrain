{"ast":null,"code":"import _classCallCheck from\"/Users/changhsinchien/Desktop/Web-developer/Face_Recognition/facerecognition/smartbrain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/changhsinchien/Desktop/Web-developer/Face_Recognition/facerecognition/smartbrain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/changhsinchien/Desktop/Web-developer/Face_Recognition/facerecognition/smartbrain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/changhsinchien/Desktop/Web-developer/Face_Recognition/facerecognition/smartbrain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./App.css';import Navigation from'./components/Navigation/Navigation.js';import Logo from'./components/Logo/Logo.js';import ImageLinkeForm from'./components/ImageLinkeForm/ImageLinkeForm.js';import Rank from'./components/Rank/Rank.js';import Particles from'react-particles-js';import FaceRecognition from'./components/FaceRecognition/FaceRecognition.js';import SignIn from'./components/SignIn/SignIn.js';import Register from'./components/Register/Register.js';var particleOption={particles:{number:{value:120,density:{enable:true,value_area:800}}}};var initial_state={input:'',box:{},imageURL:'',route:'signin',isSignin:false,user:{id:'',name:'',email:'',entries:'',join:''}};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.calculateFaceLocation=function(data){var clarifaiFace=data.outputs[0].data.regions[0].region_info.bounding_box;console.log(clarifaiFace);var img=document.getElementById('input_image');// It is string originally, so we need to transfrom it into integer\nvar width=Number(img.width);var height=Number(img.height);console.log(width,height);return{leftCol:clarifaiFace.left_col*width,topRow:clarifaiFace.top_row*height,// right is form right side \nrightCol:width-clarifaiFace.right_col*width,// bottom is form bottom side \nbottomRow:height-clarifaiFace.bottom_row*height};};_this.loadUser=function(data){_this.setState({user:{id:data.id,name:data.name,email:data.email,entries:data.entries,join:data.join}});};_this.displayFaceBox=function(box){_this.setState({box:box});};_this.onInputChange=function(event){_this.setState({input:event.target.value});};_this.onSubmit=function(){_this.setState({imageURL:_this.state.input});fetch('https://agile-depths-63645.herokuapp.com/imageurl',{// put request only need id\nmethod:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({input:_this.state.input})}// .json means we want the read what server is talking about\n).then(function(response){return response.json();}).then(function(response){// Use Class here\nif(response){// put request\nfetch('https://agile-depths-63645.herokuapp.com/image',{// put request only need id\nmethod:'put',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:_this.state.user.id})}// .json means we want the read what server is talking about\n//this is a fetch so it is response.json()\n).then(function(response){return response.json();}).then(function(count){// {user:{entries: count}} is not good because it will change the entire object\n// the below assigned way only change the one(properties) that we want to change\n_this.setState(Object.assign(_this.state.user,{entries:count}));});_this.displayFaceBox(_this.calculateFaceLocation(response));}}).catch(function(err){return console.log(\"fail\");});};_this.onRouteChange=function(args){if(args==='signout'){_this.setState(initial_state);}else if(args==='home'){_this.setState({isSignin:true});}_this.setState({route:args});};_this.state=initial_state;return _this;}// ********************************\n// use to connect to the server\n// componentDidMount(){\n//   fetch('http://localhost:3000/')\n//   .then(response=>response.json())\n//   .then(console.log)\n// }\n// ********************************\n_createClass(App,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Particles,{className:\"particle\",params:particleOption}),/*#__PURE__*/React.createElement(Navigation,{isSignin:this.state.isSignin,onRouteChange:this.onRouteChange}),this.state.route=='home'// wrap then we can use javascript syntax\n?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Logo,null),/*#__PURE__*/React.createElement(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/React.createElement(ImageLinkeForm,{onInputChange:this.onInputChange,Onsubmit:this.onSubmit}),/*#__PURE__*/React.createElement(FaceRecognition,{box:this.state.box,imageURL:this.state.imageURL})):this.state.route=='signin'?/*#__PURE__*/React.createElement(SignIn,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):/*#__PURE__*/React.createElement(Register,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/changhsinchien/Desktop/Web-developer/Face_Recognition/facerecognition/smartbrain/src/App.js"],"names":["React","Component","Navigation","Logo","ImageLinkeForm","Rank","Particles","FaceRecognition","SignIn","Register","particleOption","particles","number","value","density","enable","value_area","initial_state","input","box","imageURL","route","isSignin","user","id","name","email","entries","join","App","calculateFaceLocation","data","clarifaiFace","outputs","regions","region_info","bounding_box","console","log","img","document","getElementById","width","Number","height","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","loadUser","setState","displayFaceBox","onInputChange","event","target","onSubmit","state","fetch","method","headers","body","JSON","stringify","then","response","json","count","Object","assign","catch","err","onRouteChange","args"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './App.css';\nimport Navigation from './components/Navigation/Navigation.js'\nimport Logo from './components/Logo/Logo.js'\nimport ImageLinkeForm from './components/ImageLinkeForm/ImageLinkeForm.js'\nimport Rank from './components/Rank/Rank.js'\nimport Particles from 'react-particles-js';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition.js'\nimport SignIn from './components/SignIn/SignIn.js'\nimport Register from './components/Register/Register.js'\n\n\nconst particleOption ={\n  particles: {\n    number: {\n      value: 120,\n      density: {\n        enable: true,\n        value_area: 800\n      }\n    }\n  }\n}\n\n\nconst initial_state = {\n  input: '',\n  box:{},\n  imageURL:'',\n  route: 'signin',\n  isSignin: false,\n  user: {\n    id: '',\n    name: '',\n    email: '',\n    entries: '',\n    join: ''\n  }\n};\n\n\nclass App extends Component {\n  constructor(){\n    super();\n    this.state=initial_state;\n  }\n// ********************************\n// use to connect to the server\n  // componentDidMount(){\n  //   fetch('http://localhost:3000/')\n  //   .then(response=>response.json())\n  //   .then(console.log)\n  // }\n// ********************************\n\n\n  calculateFaceLocation = (data)=>{\n    const clarifaiFace = data.outputs[0].data.regions[0].region_info.bounding_box;\n    console.log(clarifaiFace);\n    const img = document.getElementById('input_image');\n    // It is string originally, so we need to transfrom it into integer\n    const width = Number(img.width);\n    const height= Number(img.height);\n    console.log(width, height);\n    return{\n      leftCol : clarifaiFace.left_col*width,\n      topRow : clarifaiFace.top_row*height,\n      // right is form right side \n      rightCol : width - clarifaiFace.right_col*width,\n      // bottom is form bottom side \n      bottomRow : height - clarifaiFace.bottom_row*height\n    }\n  }\n\n  loadUser = (data)=>{\n    this.setState(\n        {user:{\n            id: data.id,\n            name: data.name,\n            email: data.email,\n            entries: data.entries,\n            join: data.join\n          }\n        }\n    )\n  }\n  displayFaceBox = (box)=>{\n    this.setState({box: box});\n  }\n\n  onInputChange = (event)=>{\n    this.setState({input: event.target.value});\n  }\n  // the connection between front-end and back-end by fetch can create real fucntionality\n  onSubmit = ()=>{\n    this.setState({imageURL: this.state.input});\n    fetch('https://agile-depths-63645.herokuapp.com/imageurl', {\n      // put request only need id\n      method: 'post',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        input: this.state.input\n        }\n      )\n    }\n      // .json means we want the read what server is talking about\n    ).then(response=>response.json())\n    .then(response =>{\n        // Use Class here\n        if(response){\n          // put request\n          fetch('https://agile-depths-63645.herokuapp.com/image', {\n              // put request only need id\n              method: 'put',\n              headers: {'Content-Type': 'application/json'},\n              body: JSON.stringify(\n                {\n                  id: this.state.user.id\n                }\n              )\n            }\n            // .json means we want the read what server is talking about\n            //this is a fetch so it is response.json()\n          ).then(response=>response.json()).then(count=>{\n            // {user:{entries: count}} is not good because it will change the entire object\n            // the below assigned way only change the one(properties) that we want to change\n            this.setState(Object.assign(this.state.user, {entries: count}))\n          })\n        this.displayFaceBox(this.calculateFaceLocation(response)) \n      }\n    }\n    )\n    .catch(err=> console.log(\"fail\"));\n  }\n  onRouteChange = (args)=>{\n    if(args==='signout'){\n      this.setState(initial_state);\n    }else if(args==='home'){\n      this.setState({ isSignin: true });\n    }\n    this.setState({ route: args});\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Particles className ='particle'\n          params={\n            particleOption\n          }\n        />\n        <Navigation isSignin={this.state.isSignin} onRouteChange={this.onRouteChange}/>\n        \n        {this.state.route=='home'\n        // wrap then we can use javascript syntax\n          ? \n          <div>\n            <Logo />\n            <Rank name ={this.state.user.name} entries={this.state.user.entries} />\n            <ImageLinkeForm \n              onInputChange={this.onInputChange}\n              Onsubmit={this.onSubmit} />\n            <FaceRecognition box={this.state.box} imageURL={this.state.imageURL} />\n          </div>\n          : (this.state.route == 'signin'\n          ? <SignIn loadUser = {this.loadUser} onRouteChange={this.onRouteChange} />\n          : <Register loadUser = {this.loadUser} onRouteChange={this.onRouteChange} />\n          )\n        }\n\n      </div>\n    );\n  }\n}\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}